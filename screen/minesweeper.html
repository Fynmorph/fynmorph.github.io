<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" href="../Aleksandre.css" media="screen" title="comments">
</head>

<body style="background-color:#5891FA">

	<center><div class=bouton><a href="../screen.html">
	<<<
	</div></a></center>
	
	</br></br>
	
	<center>
	
	<div>
	<img src="001.png" alt=""/></br><img src="002.png" alt="" /><img src="facesmile.gif" id="smile" alt="" onclick="restart()" /><img src="003.png" alt="" /></br><img src="004.png" alt="" />
	<div style=""id="demineur"></div><img src="006.png" alt="" />
	
	</div>
	
	</br></br>
	<div id="result"></div>
	</center>
	
	</br>
	<div id="hint"></div>
	
</body>
<script src="../jquery-1.10.2.js"></script>
<script type="text/javascript" src="../custom.js"></script>
<script type="application/javascript">

	if (getCookie("hack") && getCookie("hack")!="off"){
	window.location.href = getCookie("hack") + ".html";
	}

var array = [422,332,423,363,303,304,394,249,279,309,340,341,312,282,252,79,109,139,169,110,141,172,142,112,82,446,416,417,447,450];
var complete = 0;
var complete2 = 0;
var gameover = 0;
startup()

function startup() {
for (var i=0; i < 15; i++){
	for (var j=0; j < 30; j++){
	
	if (j==0){
	var x = document.createElement("IMG"); 
		x.src = "005.png"
		x.alt = "";
	var element = document.getElementById("demineur");
		element.appendChild(x);
	}
	
		var x = document.createElement("IMG"); 
		x.src = "blank.gif";
		x.id = i*30+j;
		x.alt = "";
		x.onclick = function () { clic(this)
		}
		var element = document.getElementById("demineur");
		element.appendChild(x);
		
	if (j==29){
	var x = document.createElement("IMG"); 
		x.src = "005.png"
		x.alt = "";
	var element = document.getElementById("demineur");
		element.appendChild(x);
	}	
	
	}
	element = document.getElementById("demineur");
	element.appendChild(document.createElement("br"));
}

};

function clic(e){
		e.onclick = function () {};
		console.log(e.id);
		if (!gameover){
			if (array.includes( Number(e.id))){
			
			e.src = "open0.gif";
			complete++;
			complete2 = complete2 + Number(e.id)
			Complete(complete);
			}
			else{
			
			document.cookie = "error =" + (Number(getCookie("error"))+1) + "; path=/"
			
			if(getCookie("error")>=15){
			$( '#hint' ).replaceWith( '<div style="background-color:#5891FA;margin-left:30%;margin-right:30%;" id="hint"><img src="../mich.gif" alt="mich"/><p><div class=msg>This looks impossible without a map...</div></div>' ); 
			}
			
			e.src = "bombdeath.gif";
			gameover = 1;
			
			var element = document.getElementById("smile");
			element.src="facedead.gif";
			}
		}
}

function restart(){
document.cookie = 'minesweeper = ; path=/';
location.reload();; 
}

function Complete(e){
if (e == 29){
var element = document.getElementById("smile");
element.src="facewin.gif";

element = document.getElementById("result");

var a = document.createElement('a');
var linkText = document.createTextNode(complete2 + ".html");
a.appendChild(linkText);
a.title = "my title text";
a.href = complete2 + ".html";
element.appendChild(a);

gameover=1;

if (!getCookie('minesweeper')){
document.cookie = "totalerror =" + (Number(getCookie('totalerror')) + Number(getCookie('error'))) + "; path=/"
document.cookie = "error = 0; path=/"
}
document.cookie = "minesweeper="+  complete2 +"; path=/";
}

}

if (getCookie("minesweeper")!=""){
	complete2 = getCookie("minesweeper");
	Complete(29);
	}
</script>